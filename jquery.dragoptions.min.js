(function(a){a.fn.extend({dragOptions:function(f){var e={highlight:"â–º"};var c=a.extend(e,f);var d=null;var b=false;a(document.body).on("mouseup",function(){b=false});return this.each(function(){var j={initial:[],hover:-1,current:-1};var g=c;var i=a(this);a(i).on("mousedown","option",function(k){if(!b&&!j.initial.length&&!k.ctrlKey&&!k.shiftKey){b=true;h();j.initial=[];j.initialObjects=[];a("option",i).each(function(){j.initial.push({key:a(this).val(),text:a(this).text()});j.initialObjects.push(this)});a(this).text(g.highlight+a(this).text());j.drag=a(this).data("index");j.current=j.drag;d=this}}).on("mousemove","option",function(){if(!b&&!j.initial.length){return false}j.hover=a(this).data("index");if(j.current!=j.hover){j.current=j.hover;var l=j.initial.slice(0);var o=[];var p=l.splice(j.drag,1);for(var n=0,m=l.length;n<=m;n++){if(n!=j.current){o.push(l.shift())}else{o.push(p[0])}}a("option",i).each(function(k){if(k==j.current){a(this).text(g.highlight+o[k].text)}else{a(this).text(o[k].text)}});a("option",i).removeAttr("selected").eq(j.current).attr("selected","selected");(g.onDrag||a.noop).call(i)}}).on("mouseup","option",function(){if(!j.initial.length){return false}a("option",i).each(function(k){a(this).text(j.initial[k].text)});i.html("");var n=j.initialObjects.splice(j.drag,1);for(var m=0,l=j.initialObjects.length;m<=l;m++){if(m!=j.current){i.append(j.initialObjects.shift())}else{i.append(n[0])}}a("option",i).removeAttr("selected").eq(j.current).attr("selected","selected");h();j.hover=-1;j.initial=[];j.initialObjects=[];d=null;(g.onChange||a.noop).call(i)}).on("mouseleave",function(){a(d).trigger("mouseup")}).on("mousemove",function(){if(!b&&d){a(d).trigger("mouseup")}});var h=function(){a("option",i).each(function(k){a(this).data("index",k)})}})}})})(jQuery);