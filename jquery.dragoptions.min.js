!function(t){t.fn.extend({dragOptions:function(i){var n=t.extend({highlight:"â–º"},i),e=null,o=!1;return t(document.body).on("mouseup",function(){o=!1}),this.each(function(){var i={initial:[],hover:-1,current:-1},r=n,c=t(this);t(c).on("mousedown","option",function(t){o||i.initial.length||t.ctrlKey||t.shiftKey||(o=!0)}).on("mousemove","option",function(){if(o&&!i.initial.length&&(h(),i.initial=[],i.initialObjects=[],t("option",c).each(function(){i.initial.push({key:t(this).val(),text:t(this).text()}),i.initialObjects.push(this)}),t(this).text(r.highlight+t(this).text()),i.drag=t(this).data("index"),i.current=i.drag,e=this),!o&&!i.initial.length)return!1;if(i.hover=t(this).data("index"),i.current!=i.hover){i.current=i.hover;for(var n=i.initial.slice(0),l=[],u=n.splice(i.drag,1),a=0,s=n.length;a<=s;a++)a!=i.current?l.push(n.shift()):l.push(u[0]);t("option",c).each(function(n){n==i.current?t(this).text(r.highlight+l[n].text):t(this).text(l[n].text)}),t("option",c).removeAttr("selected").eq(i.current).attr("selected","selected"),(r.onDrag||t.noop).call(c)}}).on("mouseup","option",function(){if(setTimeout(function(){(r.onSelect||t.noop).call(c.children("option:selected"))}),!i.initial.length)return o=!1,!1;t("option",c).each(function(n){t(this).text(i.initial[n].text)}),c.html("");for(var n=i.initialObjects.splice(i.drag,1),l=0,u=i.initialObjects.length;l<=u;l++)l!=i.current?c.append(i.initialObjects.shift()):c.append(n[0]);t(c)[0].selectedIndex=i.current,h(),i.hover=-1,i.initial=[],i.initialObjects=[],e=null,(r.onChange||t.noop).call(c)}).on("mouseleave",function(){t(e).trigger("mouseup")}).on("mousemove",function(){!o&&e&&t(e).trigger("mouseup")});var h=function(){t("option",c).each(function(i){t(this).data("index",i)})}})}})}(jQuery);
