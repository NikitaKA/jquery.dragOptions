/*
 Info:
  Plugin: dragOptions
  Version: 1.0
  Browsers: Chrome, Firefox, Opera, Safari
  Author: Nikita Korobochkin
  E-mail: nikita.ak.85@gmail.com

 Usage:
  $("select").dragOptions({});

 Options:
  highlight: String  //Symbol to highlight current draggable option
*/
(function(a){a.fn.extend({dragOptions:function(b){var c={highlight:"â–º"};var d=a.extend(c,b);return this.each(function(){var b={initial:[],hover:-1,current:-1};var c=d;var e=a(this);a(e).on("mousedown","option",function(){if(b.initial.length)return false;f();b.initial=[];b.initialObjects=[];a("option",e).each(function(){b.initial.push({key:a(this).val(),text:a(this).text()});b.initialObjects.push(this)});a(this).text(c.highlight+a(this).text());b.drag=a(this).data("index");b.current=b.drag}).on("mousemove","option",function(){if(!b.initial.length)return false;b.hover=a(this).data("index");if(b.current!=b.hover){b.current=b.hover;var d=b.initial.slice(0);var f=[];var g=d.splice(b.drag,1);for(var h=0,i=d.length;h<=i;h++){if(h!=b.current){f.push(d.shift())}else{f.push(g[0])}}a("option",e).each(function(d){if(d==b.current){a(this).text(c.highlight+f[d].text)}else{a(this).text(f[d].text)}})}}).on("mouseup","option",function(){if(!b.initial.length)return false;a("option",e).each(function(c){a(this).text(b.initial[c].text)});e.html("");var c=b.initialObjects.splice(b.drag,1);for(var d=0,g=b.initialObjects.length;d<=g;d++){if(d!=b.current){e.append(b.initialObjects.shift())}else{e.append(c[0])}}a("option",e).eq(b.current).attr("selected","selected");f();b.hover=-1;b.initial=[];b.initialObjects=[]});var f=function(){a("option",e).each(function(b){a(this).data("index",b)})}})}})})(jQuery)